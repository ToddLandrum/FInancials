*--------------------------------------------------------------------------------------------------------------------------------------------------------
* (ES) AUTOGENERADO - ¡¡ATENCIÓN!! - ¡¡NO PENSADO PARA EJECUTAR!! USAR SOLAMENTE PARA INTEGRAR CAMBIOS Y ALMACENAR CON HERRAMIENTAS SCM!!
* (EN) AUTOGENERATED - ATTENTION!! - NOT INTENDED FOR EXECUTION!! USE ONLY FOR MERGING CHANGES AND STORING WITH SCM TOOLS!!
*--------------------------------------------------------------------------------------------------------------------------------------------------------
*< FOXBIN2PRG: Version="1.19" SourceFile="bmrleases.scx" /> (Solo para binarios VFP 9 / Only for VFP 9 binaries)
*
*
DEFINE CLASS dataenvironment AS dataenvironment 
 	*< CLASSDATA: Baseclass="dataenvironment" Timestamp="" Scale="" Uniqueid="" ClassIcon="2" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Cursor1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor2" UniqueID="" Timestamp="" />

	AutoOpenTables = .F.
	DataSource = .NULL.
	Height = 200
	Left = 40
	Name = "Dataenvironment"
	Top = 235
	Width = 520

	ADD OBJECT 'Cursor1' AS cursor WITH ;
		Alias = "custs", ;
		CursorSource = "custs", ;
		Database = ..\ampro\datafiles\data\appdata.dbc, ;
		Height = 90, ;
		Left = 10, ;
		Name = "Cursor1", ;
		Top = 20, ;
		Width = 90
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor2' AS cursor WITH ;
		Alias = "leases", ;
		CursorSource = "leases", ;
		Database = ..\ampro\datafiles\data\appdata.dbc, ;
		Height = 90, ;
		Left = 150, ;
		Name = "Cursor2", ;
		Top = 20, ;
		Width = 90
		*< END OBJECT: BaseClass="cursor" />

ENDDEFINE

DEFINE CLASS formbmrleases AS frmrptcriteria OF "..\source\appforms.vcx" 
 	*< CLASSDATA: Baseclass="form" Timestamp="" Scale="" Uniqueid="" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Swrptlook1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Swrptlook2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbllabelcustom1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbllabelcustom2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbllabelcustom3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbllabelcustom4" UniqueID="" Timestamp="" />

	Caption = "Brine Lease Listings"
	DoCreate = .T.
	Height = 333
	HelpContextID = 646
	Name = "FormBmrleases"
	Width = 400
	Swrptcriteriabuttons1.chkSendFile.Alignment = 0
	Swrptcriteriabuttons1.chkSendFile.Name = "chkSendFile"
	Swrptcriteriabuttons1.cmdclose.Name = "cmdclose"
	Swrptcriteriabuttons1.cmdPreview.Name = "cmdPreview"
	Swrptcriteriabuttons1.cmdPrint.Name = "cmdPrint"
	Swrptcriteriabuttons1.Left = 84
	Swrptcriteriabuttons1.Name = "Swrptcriteriabuttons1"
	Swrptcriteriabuttons1.Top = 264

	ADD OBJECT 'Lbllabelcustom1' AS lbllabelcustom WITH ;
		Caption = "Beginning Customer", ;
		Left = 24, ;
		Name = "Lbllabelcustom1", ;
		Top = 36
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbllabelcustom2' AS lbllabelcustom WITH ;
		Caption = "Ending Customer", ;
		Left = 24, ;
		Name = "Lbllabelcustom2", ;
		Top = 84
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbllabelcustom3' AS lbllabelcustom WITH ;
		Caption = "Beginning Lease", ;
		Left = 24, ;
		Name = "Lbllabelcustom3", ;
		Top = 144
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbllabelcustom4' AS lbllabelcustom WITH ;
		Caption = "Ending Lease", ;
		Left = 24, ;
		Name = "Lbllabelcustom4", ;
		Top = 196
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Swrptlook1' AS swrptlook WITH ;
		Left = 129, ;
		Name = "Swrptlook1", ;
		Top = 34, ;
		Swlookupbutton1.Name = "Swlookupbutton1", ;
		Swlookupbutton2.Name = "Swlookupbutton2", ;
		txtBegID.clistexpression = ccustid, ;
		txtBegID.clistworkarea = custs, ;
		txtBegID.Name = "txtBegID", ;
		TxtBegName.Name = "TxtBegName", ;
		txtEndID.clistexpression = ccustid, ;
		txtEndID.clistworkarea = custs, ;
		txtEndID.Name = "txtEndID", ;
		TxtEndName.Name = "TxtEndName"
		*< END OBJECT: ClassLib="..\custom\swcontrol.vcx" BaseClass="container" />

	ADD OBJECT 'Swrptlook2' AS swrptlook WITH ;
		Left = 129, ;
		Name = "Swrptlook2", ;
		Top = 142, ;
		Swlookupbutton1.Name = "Swlookupbutton1", ;
		Swlookupbutton2.Name = "Swlookupbutton2", ;
		txtBegID.clistexpression = cwellid, ;
		txtBegID.clistworkarea = leases, ;
		txtBegID.Name = "txtBegID", ;
		TxtBegName.Name = "TxtBegName", ;
		txtEndID.clistexpression = cwellid, ;
		txtEndID.clistworkarea = leases, ;
		txtEndID.Name = "txtEndID", ;
		TxtEndName.Name = "TxtEndName"
		*< END OBJECT: ClassLib="..\custom\swcontrol.vcx" BaseClass="container" />
	
	PROCEDURE builddata
		
		THISFORM.creportname = 'bmrleases'
		THISFORM.ctitle1     = 'Lease Listing'
		THISFORM.ctitle2     = ''
		
		THISFORM.csortorder  = 'Customer, Lease'
		THISFORM.cselectCriteria = 'Customers: ' + TRIM(THISFORM.swrptlook1.txtbegid.VALUE) + ' - ' + TRIM(THISFORM.swrptlook1.txtendid.VALUE)
		
		SELECT leases.*, custs.ccustname FROM leases, custs ;
		   WHERE  BETWEEN(leases.ccustid,THISFORM.swrptlook1.txtbegid.VALUE,THISFORM.swrptlook1.txtendid.VALUE) ;
		   AND BETWEEN(leases.cwellid,THISFORM.swrptlook2.txtbegid.VALUE,THISFORM.swrptlook2.txtendid.VALUE) ;
		   AND leases.ccustid = custs.ccustid ;
		   INTO CURSOR templease ;
		   ORDER BY leases.ccustid, leases.clease
		
		
		IF _tally > 0
		   RETURN .T.
		ELSE
		   RETURN .F.
		ENDIF      
	ENDPROC

	PROCEDURE Init
		IF DODEFAULT()
		 
		   SELECT custs
		   SET ORDER TO ccustid
		   GO TOP
		   thisform.swrptlook1.txtbegid.value = ccustid
		   thisform.swrptlook1.txtbegname.value = ccustname
		   GO BOTT
		   thisform.swrptlook1.txtendid.value = ccustid
		   thisform.swrptlook1.txtendname.value = ccustname
		   
		   SELECT leases
		   SET ORDER TO cwellid
		   GO TOP
		   thisform.swrptlook2.txtbegid.value = cwellid
		   thisform.swrptlook2.txtbegname.value = clease
		   GO BOTT
		   thisform.swrptlook2.txtendid.value = cwellid
		   thisform.swrptlook2.txtendname.value = clease 
		   
		ENDIF   
	ENDPROC

	PROCEDURE Swrptlook1.Swlookupbutton1.Click
		LOCAL lcList
		PRIV llOK
		
		llOK = .F.
		
		lcList = 'ccustid,ccustname'
		
		DO FORM ..\custom\picklist WITH 'Custs', lcList, thisform.swrptlook1.txtbegid.value, 2
		
		IF llOK
		   thisform.swrptlook1.txtbegid.value = custs.ccustid
		   thisform.swrptlook1.txtbegname.value = custs.ccustname
		   thisform.setnextcontrol(thisform.swrptlook1.txtbegid)
		   thisform.refresh()
		ENDIF   
	ENDPROC

	PROCEDURE Swrptlook1.Swlookupbutton2.Click
		LOCAL lcList
		PRIV llOK
		
		llOK = .F.
		
		lcList = 'ccustid,ccustname'
		
		DO FORM ..\custom\picklist WITH 'Custs', lcList, thisform.swrptlook1.txtendid.value, 2
		
		IF llOK
		   thisform.swrptlook1.txtendid.value = custs.ccustid
		   thisform.swrptlook1.txtendname.value = custs.ccustname
		   thisform.setnextcontrol(thisform.swrptlook1.txtendid)
		   thisform.refresh()
		ENDIF   
	ENDPROC

	PROCEDURE Swrptlook2.Swlookupbutton1.Click
		LOCAL lcList
		PRIV llOK
		
		llOK = .F.
		
		lcList = 'cwellid, clease'
		
		DO FORM ..\custom\picklist WITH 'Leases', lcList, thisform.swrptlook2.txtbegid.value, 2
		
		IF llOK
		   thisform.swrptlook2.txtbegid.value = leases.cwellid
		   thisform.swrptlook2.txtbegname.value = leases.clease
		   thisform.setnextcontrol(thisform.swrptlook2.txtbegid)
		   thisform.refresh()
		ENDIF   
	ENDPROC

	PROCEDURE Swrptlook2.Swlookupbutton2.Click
		LOCAL lcList
		PRIV llOK
		
		llOK = .F.
		
		lcList = 'cwellid, clease'
		
		DO FORM ..\custom\picklist WITH 'Leases', lcList, thisform.swrptlook2.txtendid.value, 2
		
		IF llOK
		   thisform.swrptlook2.txtendid.value = leases.cwellid
		   thisform.swrptlook2.txtendname.value = leases.clease
		   thisform.setnextcontrol(thisform.swrptlook2.txtendid)
		   thisform.refresh()
		ENDIF   
	ENDPROC

	PROCEDURE Swrptlook2.txtBegID.InteractiveChange
		IF DODEFAULT()
		   thisform.swrptlook1.txtbegName.Value = leases.clease
		ENDIF 
		
	ENDPROC

	PROCEDURE Swrptlook2.txtEndID.InteractiveChange
		IF DODEFAULT()
		   thisform.swrptlook1.txtEndName.Value = leases.clease
		ENDIF 
		
	ENDPROC

ENDDEFINE
