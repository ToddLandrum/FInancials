*--------------------------------------------------------------------------------------------------------------------------------------------------------
* (ES) AUTOGENERADO - ¡¡ATENCIÓN!! - ¡¡NO PENSADO PARA EJECUTAR!! USAR SOLAMENTE PARA INTEGRAR CAMBIOS Y ALMACENAR CON HERRAMIENTAS SCM!!
* (EN) AUTOGENERATED - ATTENTION!! - NOT INTENDED FOR EXECUTION!! USE ONLY FOR MERGING CHANGES AND STORING WITH SCM TOOLS!!
*--------------------------------------------------------------------------------------------------------------------------------------------------------
*< FOXBIN2PRG: Version="1.19" SourceFile="dmgraphprod.scx" /> (Solo para binarios VFP 9 / Only for VFP 9 binaries)
*
*
DEFINE CLASS dataenvironment AS dataenvironment 
 	*< CLASSDATA: Baseclass="dataenvironment" Timestamp="" Scale="" Uniqueid="" ClassIcon="2" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Cursor1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Relation1" UniqueID="" Timestamp="" />

	AutoOpenTables = .F.
	DataSource = .NULL.
	Height = 200
	Left = -11
	Name = "Dataenvironment"
	Top = 205
	Width = 520

	ADD OBJECT 'Cursor1' AS cursor WITH ;
		Alias = "wells", ;
		CursorSource = "wells", ;
		Database = ..\amdata\appdata.dbc, ;
		Height = 90, ;
		Left = 10, ;
		Name = "Cursor1", ;
		Top = 20, ;
		Width = 95
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor2' AS cursor WITH ;
		Alias = "wellhist", ;
		CursorSource = "wellhist", ;
		Database = ..\amdata\appdata.dbc, ;
		Height = 90, ;
		Left = 113, ;
		Name = "Cursor2", ;
		Top = 21, ;
		Width = 95
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Relation1' AS relation WITH ;
		ChildAlias = "wellhist", ;
		ChildOrder = "cwellid", ;
		Name = "Relation1", ;
		ParentAlias = "wells", ;
		RelationalExpr = "cwellid"
		*< END OBJECT: BaseClass="relation" />

ENDDEFINE

DEFINE CLASS formdmrwmcf AS frmrptcriteria OF "..\source\appforms.vcx" 
 	*< CLASSDATA: Baseclass="form" Timestamp="" Scale="" Uniqueid="" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="cboGroup" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="txtYear" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="opgSelect" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbltextcustom2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Swrptlook1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbltextcustom3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbltextcustom4" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbltextcustom5" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="txtYear2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbltextcustom1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbllabelcustom1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="opgType" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Lbllabelcustom2" UniqueID="" Timestamp="" />

	Caption = "Production Graphs"
	DataSession = 2
	DoCreate = .T.
	Height = 388
	HelpContextID = 490
	Name = "FormDmrwmcf"
	Width = 402
	Swrptcriteriabuttons1.chkExport.Alignment = 0
	Swrptcriteriabuttons1.chkExport.Name = "chkExport"
	Swrptcriteriabuttons1.cmdclose.Name = "cmdclose"
	Swrptcriteriabuttons1.cmdPreview.Name = "cmdPreview"
	Swrptcriteriabuttons1.cmdPrint.Name = "cmdPrint"
	Swrptcriteriabuttons1.Left = 84
	Swrptcriteriabuttons1.Name = "Swrptcriteriabuttons1"
	Swrptcriteriabuttons1.TabIndex = 13
	Swrptcriteriabuttons1.Top = 304

	ADD OBJECT 'cboGroup' AS swgroup WITH ;
		Left = 114, ;
		Name = "cboGroup", ;
		TabIndex = 8, ;
		Top = 132
		*< END OBJECT: ClassLib="..\custom\swcontrol.vcx" BaseClass="combobox" />

	ADD OBJECT 'Lbllabelcustom1' AS lbllabelcustom WITH ;
		Caption = "Group:", ;
		Left = 70, ;
		Name = "Lbllabelcustom1", ;
		TabIndex = 9, ;
		Top = 136
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbllabelcustom2' AS lbllabelcustom WITH ;
		Caption = "Type of Production", ;
		Left = 36, ;
		Name = "Lbllabelcustom2", ;
		TabIndex = 14, ;
		Top = 56
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbltextcustom1' AS lbltextcustom WITH ;
		BackStyle = 0, ;
		Caption = "Ending Year:", ;
		Left = 165, ;
		Name = "Lbltextcustom1", ;
		TabIndex = 7, ;
		Top = 94
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbltextcustom2' AS lbltextcustom WITH ;
		BackStyle = 0, ;
		Caption = "Beginning Year:", ;
		Left = 26, ;
		Name = "Lbltextcustom2", ;
		TabIndex = 5, ;
		Top = 94
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbltextcustom3' AS lbltextcustom WITH ;
		BackStyle = 0, ;
		Caption = "First Well:", ;
		Left = 56, ;
		Name = "Lbltextcustom3", ;
		TabIndex = 11, ;
		Top = 172
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbltextcustom4' AS lbltextcustom WITH ;
		BackStyle = 0, ;
		Caption = "Last Well:", ;
		Left = 56, ;
		Name = "Lbltextcustom4", ;
		TabIndex = 12, ;
		Top = 223
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'Lbltextcustom5' AS lbltextcustom WITH ;
		Caption = "Report Range:", ;
		Left = 34, ;
		Name = "Lbltextcustom5", ;
		TabIndex = 3, ;
		Top = 19
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'opgSelect' AS opgoptiongroupcustom WITH ;
		AutoSize = .F., ;
		BorderStyle = 0, ;
		ButtonCount = 2, ;
		Height = 36, ;
		Left = 132, ;
		Name = "opgSelect", ;
		TabIndex = 1, ;
		Top = 11, ;
		Width = 238, ;
		Option1.AutoSize = .T., ;
		Option1.Caption = "Production Year", ;
		Option1.FontSize = 8, ;
		Option1.Height = 16, ;
		Option1.Left = 5, ;
		Option1.Name = "Option1", ;
		Option1.Top = 8, ;
		Option1.Width = 96, ;
		Option2.AutoSize = .T., ;
		Option2.Caption = "Accounting Year", ;
		Option2.FontSize = 8, ;
		Option2.Height = 16, ;
		Option2.Left = 118, ;
		Option2.Name = "Option2", ;
		Option2.Top = 8, ;
		Option2.Width = 100
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="optiongroup" />

	ADD OBJECT 'opgType' AS opgoptiongroupcustom WITH ;
		AutoSize = .F., ;
		BorderStyle = 0, ;
		ButtonCount = 2, ;
		Height = 36, ;
		Left = 132, ;
		Name = "opgType", ;
		TabIndex = 2, ;
		Top = 47, ;
		Width = 238, ;
		Option1.AutoSize = .T., ;
		Option1.Caption = "Gas", ;
		Option1.FontSize = 8, ;
		Option1.Height = 16, ;
		Option1.Left = 5, ;
		Option1.Name = "Option1", ;
		Option1.Top = 8, ;
		Option1.Width = 38, ;
		Option2.AutoSize = .T., ;
		Option2.Caption = " Oil", ;
		Option2.FontSize = 8, ;
		Option2.Height = 16, ;
		Option2.Left = 55, ;
		Option2.Name = "Option2", ;
		Option2.Top = 8, ;
		Option2.Width = 33
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="optiongroup" />

	ADD OBJECT 'Swrptlook1' AS swrptlook WITH ;
		Left = 114, ;
		Name = "Swrptlook1", ;
		TabIndex = 10, ;
		Top = 169, ;
		ZOrderSet = 5, ;
		Swlookupbutton1.Name = "Swlookupbutton1", ;
		Swlookupbutton2.Name = "Swlookupbutton2", ;
		txtBegID.clistexpression = wells.cwellid, ;
		txtBegID.clistworkarea = wells, ;
		txtBegID.Name = "txtBegID", ;
		TxtBegName.Name = "TxtBegName", ;
		txtEndID.clistexpression = wells.cwellid, ;
		txtEndID.clistworkarea = wells, ;
		txtEndID.Name = "txtEndID", ;
		TxtEndName.Name = "TxtEndName"
		*< END OBJECT: ClassLib="..\custom\swcontrol.vcx" BaseClass="container" />

	ADD OBJECT 'txtYear' AS swyear WITH ;
		Enabled = .T., ;
		Left = 114, ;
		lenabled = .T., ;
		MaxLength = 4, ;
		Name = "txtYear", ;
		TabIndex = 4, ;
		Top = 92
		*< END OBJECT: ClassLib="..\custom\swcontrol.vcx" BaseClass="textbox" />

	ADD OBJECT 'txtYear2' AS swyear WITH ;
		Enabled = .T., ;
		Left = 229, ;
		lenabled = .T., ;
		MaxLength = 4, ;
		Name = "txtYear2", ;
		TabIndex = 6, ;
		Top = 92
		*< END OBJECT: ClassLib="..\custom\swcontrol.vcx" BaseClass="textbox" />
	
	PROCEDURE builddata
		LOCAL tcWell1, tcWell2, tnSort, tcGroup, tcYear1, tcYear2
		
		tcWell1 = ALLTRIM(THISFORM.swrptlook1.txtBegID.VALUE)
		tcWell2 = ALLTRIM(THISFORM.swrptlook1.txtEndID.VALUE)
		tnSort = THISFORM.opgSelect.VALUE
		tcGroup = SUBSTR(THISFORM.cboGroup.VALUE,1,2)
		tcYear1 = STR(THISFORM.txtYear.VALUE,4)
		tcYear2 = STR(THISFORM.txtYear2.VALUE,4)
		tcType  = IIF(thisform.opgtype.Value = 1,'G','O')
		
		SELECT cwellid FROM wells WHERE BETWEEN(cwellid,tcWell1,tcWell2) INTO CURSOR temp
		IF _tally < 6
		   m.gostatemanager.openmodalform('dmgraphprodchild.scx',tcwell1,tcwell2,tcgroup,tnsort,tcyear1,tcyear2,tcType)
		ELSE
		   MESSAGEBOX('The graph cannot handle more than 5 wells at a time. Please choose fewer wells in the well range.',48,'Too Many Wells')
		ENDIF       
		
		RETURN 
	ENDPROC

	PROCEDURE Init
		DODEFAULT()
		
		SELECT wells
		SET ORDER TO cWellID
		
		GO TOP
		THISFORM.swrptlook1.txtBegName.VALUE = cwellname
		THISFORM.swrptlook1.txtBegID.VALUE = cWellID
		
		GO BOTTOM
		THISFORM.swrptlook1.txtEndName.VALUE = cwellname
		THISFORM.swrptlook1.txtEndID.VALUE = cWellID
		
		THISFORM.txtYear.VALUE = YEAR(DATE())
		THISFORM.txtYear2.VALUE = YEAR(DATE())
		
		
		
		thisform.swrptcriteriabuttons1.chkExport.Visible = .f.
	ENDPROC

	PROCEDURE report
		LPARAMETERS junk
		
		return
	ENDPROC

	PROCEDURE opgSelect.Init
		THIS.VALUE = 1
		
	ENDPROC

	PROCEDURE opgSelect.Option1.GotFocus
		THISFORM.opgSelect.VALUE = 1
		
		THIS.CLICK()
		
	ENDPROC

	PROCEDURE opgSelect.Option2.GotFocus
		THISFORM.opgSelect.VALUE = 2
		
		THIS.CLICK()
		
	ENDPROC

	PROCEDURE opgType.Init
		THIS.VALUE = 1
		
	ENDPROC

	PROCEDURE opgType.Option1.GotFocus
		THISFORM.opgType.VALUE = 1
		
		THIS.CLICK()
		
	ENDPROC

	PROCEDURE opgType.Option2.GotFocus
		THISFORM.opgType.VALUE = 2
		
		THIS.CLICK()
		
	ENDPROC

	PROCEDURE Swrptlook1.Swlookupbutton1.Click
		LOCAL lcList
		PRIV llOK
		
		llOK = .F.
		lcList = 'cwellid,cwellname,cgroup,cwellstat'
		DO FORM ..\custom\picklist WITH 'Wells', lcList, thisform.swrptlook1.txtbegid.value, 4
		
		IF llOK
		   thisform.swrptlook1.txtBegId.value = cwellid
		   thisform.swrptlook1.txtBegName.value = cwellname
		   thisform.swrptlook1.txtBegId.refresh()
		   thisform.swrptlook1.txtBegName.refresh()
		ENDIF   
		
		thisform.setnextcontrol(thisform.swrptlook1.txtBegId)
		
	ENDPROC

	PROCEDURE Swrptlook1.Swlookupbutton2.Click
		LOCAL lcList
		PRIV llOK
		
		llOK = .F.
		lcList = 'cwellid,cwellname,cgroup,cwellstat'
		DO FORM ..\custom\picklist WITH 'Wells', lcList, thisform.swrptlook1.txtendid.value, 4
		
		IF llOK
		   thisform.swrptlook1.txtEndId.value = cwellid
		   thisform.swrptlook1.txtEndName.value = cwellname
		   thisform.swrptlook1.txtEndId.refresh()
		   thisform.swrptlook1.txtEndName.refresh()
		ENDIF   
		
		thisform.setnextcontrol(thisform.swrptlook1.txtEndId)
		
	ENDPROC

	PROCEDURE txtYear.Valid
		*
	ENDPROC

	PROCEDURE txtYear2.Valid
		*
	ENDPROC

ENDDEFINE
