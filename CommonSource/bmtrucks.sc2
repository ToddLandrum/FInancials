*--------------------------------------------------------------------------------------------------------------------------------------------------------
* (ES) AUTOGENERADO - ¡¡ATENCIÓN!! - ¡¡NO PENSADO PARA EJECUTAR!! USAR SOLAMENTE PARA INTEGRAR CAMBIOS Y ALMACENAR CON HERRAMIENTAS SCM!!
* (EN) AUTOGENERATED - ATTENTION!! - NOT INTENDED FOR EXECUTION!! USE ONLY FOR MERGING CHANGES AND STORING WITH SCM TOOLS!!
*--------------------------------------------------------------------------------------------------------------------------------------------------------
*< FOXBIN2PRG: Version="1.19" SourceFile="bmtrucks.scx" /> (Solo para binarios VFP 9 / Only for VFP 9 binaries)
*
*
DEFINE CLASS dataenvironment AS dataenvironment 
 	*< CLASSDATA: Baseclass="dataenvironment" Timestamp="" Scale="" Uniqueid="" ClassIcon="2" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Cursor1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor2" UniqueID="" Timestamp="" />

	AutoOpenTables = .F.
	DataSource = .NULL.
	Height = 200
	Left = 40
	Name = "Dataenvironment"
	Top = 235
	Width = 520

	ADD OBJECT 'Cursor1' AS cursor WITH ;
		Alias = "trucks", ;
		CursorSource = "trucks", ;
		Database = ..\ampro\data\appdata.dbc, ;
		Height = 90, ;
		Left = 10, ;
		Name = "Cursor1", ;
		Top = 20, ;
		Width = 90
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor2' AS cursor WITH ;
		Alias = "trucks1", ;
		CursorSource = "trucks", ;
		Database = ..\ampro\data\appdata.dbc, ;
		Height = 90, ;
		Left = 150, ;
		Name = "Cursor2", ;
		Top = 20, ;
		Width = 95
		*< END OBJECT: BaseClass="cursor" />

ENDDEFINE

DEFINE CLASS formtrucks AS frmdatamanagerformcustom OF "..\custom\cforms.vcx" 
 	*< CLASSDATA: Baseclass="form" Timestamp="" Scale="" Uniqueid="" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="txtCtruck" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="lblCtruck" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="txtCdesc" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="lblCdesc" UniqueID="" Timestamp="" />

	Caption = "Trucks"
	clistexpression = ctruck
	cworkarea = trucks
	DoCreate = .T.
	Height = 70
	HelpContextID = 324
	Name = "FormTrucks"
	Width = 355
	cmdatamanager.Name = "cmdatamanager"
	cmlookupmanager.Name = "cmlookupmanager"

	ADD OBJECT 'lblCdesc' AS lblfieldlabelcustom WITH ;
		Caption = "Description", ;
		Height = 16, ;
		Left = 19, ;
		Name = "lblCdesc", ;
		TabIndex = 4, ;
		Top = 36, ;
		Width = 56
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'lblCtruck' AS lblfieldlabelcustom WITH ;
		Caption = "Truck Number", ;
		Height = 16, ;
		Left = 19, ;
		Name = "lblCtruck", ;
		TabIndex = 2, ;
		Top = 12, ;
		Width = 69
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="label" />

	ADD OBJECT 'txtCdesc' AS txttextboxcustom WITH ;
		ControlSource = "trucks.cdesc", ;
		Height = 20, ;
		Left = 96, ;
		MaxLength = 30, ;
		Name = "txtCdesc", ;
		TabIndex = 5, ;
		Top = 36, ;
		Width = 216
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="textbox" />

	ADD OBJECT 'txtCtruck' AS txttextboxcustom WITH ;
		ControlSource = "trucks.ctruck", ;
		Height = 20, ;
		InputMask = "!!!!", ;
		Left = 96, ;
		MaxLength = 4, ;
		Name = "txtCtruck", ;
		TabIndex = 3, ;
		Top = 12, ;
		Width = 35
		*< END OBJECT: ClassLib="..\custom\ccontrol.vcx" BaseClass="textbox" />
	
	PROCEDURE list
		LPARAMETERS cworkarea
		LOCAL lcList
		PRIV llOK
		
		lcList = 'ctruck\No.,cdesc\Description'
		llOK = .F.
		
		DO FORM ..\custom\picklist WITH 'Trucks', lcList, thisform.txtctruck.value, 2,.f.,.t.
		
		IF llOK
		   thisform.refresh()
		ENDIF   
	ENDPROC

	PROCEDURE cmdatamanager.afternew
		LPARAMETERS cworkarea
		
		THISFORM.setnextcontrol(THISFORM.txtcTruck)
		
		DODEFAULT(cworkarea)
		
	ENDPROC

	PROCEDURE txtCtruck.Valid
		IF trucks.ctruck <> this.value
		SELECT trucks1
		SET ORDER TO ctruck
		IF SEEK(this.value)
		   thisform.omessage.Display('This truck number is already in the file.')
		   RETURN 0
		ENDIF
		SELECT trucks
		ENDIF
		
		DODEFAULT()   
	ENDPROC

ENDDEFINE
